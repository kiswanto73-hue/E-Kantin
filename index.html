<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Kantin Indonesia Hebat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        .hidden { display: none !important; }
        .animate-pop { animation: pop 0.3s ease-out; }
        @keyframes pop { 0% { transform: scale(0.9); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body class="bg-indigo-950 min-h-screen font-sans">

    <div id="sec_login_portal" class="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-indigo-950">
        <div class="bg-white w-full max-w-sm p-8 rounded-[3rem] shadow-2xl border-b-8 border-yellow-400 animate-pop">
            <div class="text-center mb-6">
                <div class="bg-indigo-50 w-16 h-16 rounded-3xl flex items-center justify-center mx-auto mb-3 text-2xl shadow-inner">üîê</div>
                <h2 class="text-xl font-black text-indigo-900 uppercase italic leading-none">Akses Portal</h2>
                <p class="text-[9px] font-bold text-slate-400 tracking-widest uppercase mt-2 italic">Petugas Kantin</p>
            </div>
            <div class="space-y-3">
                <input type="text" id="p_user" placeholder="Username" class="w-full p-4 bg-slate-100 rounded-2xl font-bold outline-none border-2 border-transparent focus:border-indigo-500 text-sm">
                <input type="password" id="p_pass" placeholder="Password" class="w-full p-4 bg-slate-100 rounded-2xl font-bold outline-none border-2 border-transparent focus:border-indigo-500 text-sm">
                <button onclick="loginPortal()" class="w-full bg-indigo-600 text-white font-black p-4 rounded-2xl shadow-lg active:scale-95 transition-all uppercase tracking-widest text-[10px]">Masuk Portal üöÄ</button>
                <button onclick="bukaSelfService()" class="w-full bg-emerald-50 text-emerald-600 font-black p-4 rounded-2xl text-[10px] uppercase border-2 border-emerald-100 mt-4 italic">üîç Cek Saldo Siswa</button>
            </div>
        </div>
    </div>

    <div id="sec_login_panel" class="hidden fixed inset-0 z-[120] flex items-center justify-center p-6 bg-slate-900/90 backdrop-blur-md">
        <div class="bg-white w-full max-w-sm p-8 rounded-[3rem] shadow-2xl border-b-8 border-emerald-500 animate-pop">
            <div class="text-center mb-6">
                <div class="bg-emerald-50 w-16 h-16 rounded-3xl flex items-center justify-center mx-auto mb-3 text-2xl">üìä</div>
                <h2 class="text-xl font-black text-indigo-900 uppercase italic leading-none">Admin Only</h2>
                <p class="text-[9px] font-bold text-slate-400 tracking-widest uppercase mt-2">Verification Pak Kiswanto</p>
            </div>
            <div class="space-y-3">
                <input type="email" id="adm_email" placeholder="Email Admin" class="w-full p-4 bg-slate-100 rounded-2xl font-bold outline-none border-2 border-transparent focus:border-emerald-500 text-xs">
                <input type="password" id="adm_pass" placeholder="Password Khusus" class="w-full p-4 bg-slate-100 rounded-2xl font-bold outline-none border-2 border-transparent focus:border-emerald-500 text-xs">
                <button onclick="loginPanelAdmin()" class="w-full bg-emerald-600 text-white font-black p-4 rounded-2xl shadow-lg active:scale-95 transition-all uppercase text-[10px]">Verifikasi Owner ‚úÖ</button>
                <button onclick="tutupLoginPanel()" class="w-full text-slate-400 text-[9px] font-bold uppercase mt-2 italic underline">Batal</button>
            </div>
        </div>
    </div>

    <div id="sec_dashboard" class="hidden min-h-screen pb-10">
        <div class="bg-white p-10 rounded-b-[4rem] shadow-2xl border-b-8 border-yellow-400 mb-8 text-center relative">
            <button onclick="location.reload()" class="absolute top-8 right-8 text-[8px] font-black text-red-500 bg-red-50 px-3 py-1 rounded-full uppercase border border-red-100">Logout</button>
            <h1 class="text-3xl font-black italic uppercase leading-none mt-4 text-indigo-900">MAIN PORTAL</h1>
            <p class="text-[10px] font-bold text-slate-400 uppercase mt-2 italic tracking-[0.2em]">Indonesia Hebat Digital</p>
        </div>

        <div class="max-w-md mx-auto px-6 space-y-4">
            <a href="kasir-kantin.html" class="flex items-center gap-4 bg-white p-6 rounded-[2.5rem] shadow-xl border-l-8 border-orange-500 active:scale-90 transition-all">
                <div class="text-2xl">üõí</div>
                <div><h3 class="font-black text-indigo-900 uppercase italic">Kasir</h3><p class="text-[8px] font-bold text-slate-400 italic">Transaksi & Penjualan</p></div>
            </a>
            <a href="admin-kantin.html" class="flex items-center gap-4 bg-white p-6 rounded-[2.5rem] shadow-xl border-l-8 border-indigo-600 active:scale-90 transition-all">
                <div class="text-2xl">üìã</div>
                <div><h3 class="font-black text-indigo-900 uppercase italic">Menu Admin</h3><p class="text-[8px] font-bold text-slate-400 italic">Atur Stok & Saldo</p></div>
            </a>
            <button onclick="mintaAksesPanel()" class="w-full flex items-center gap-4 bg-white p-6 rounded-[2.5rem] shadow-xl border-l-8 border-emerald-500 active:scale-90 transition-all text-left">
                <div class="text-2xl">üìä</div>
                <div><h3 class="font-black text-indigo-900 uppercase italic">Monitoring Pusat</h3><p class="text-[8px] font-bold text-slate-400 italic">Laporan Keuangan Owner</p></div>
            </button>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCUjE8WXa8Py4vnojrXDUR3uCvnQEzP6zQ",
            authDomain: "e-kantin-91f0c.firebaseapp.com",
            databaseURL: "https://e-kantin-91f0c-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "e-kantin-91f0c",
            storageBucket: "e-kantin-91f0c.firebasestorage.app",
            messagingSenderId: "981834126006",
            appId: "1:981834126006:web:dac8bb0ec1da90549b4c17"
        };
        firebase.initializeApp(firebaseConfig);

        function loginPortal() {
            const u = document.getElementById('p_user').value.trim().toLowerCase();
            const p = document.getElementById('p_pass').value.trim();
            if (u === "admin" && p === "admin123") {
                sessionStorage.setItem("portalLoggedIn", "true"); // Kunci portal
                document.getElementById('sec_login_portal').classList.add('hidden');
                document.getElementById('sec_dashboard').classList.remove('hidden');
            } else { alert("Akses Portal Ditolak!"); }
        }

        function mintaAksesPanel() { document.getElementById('sec_login_panel').classList.remove('hidden'); }
        function tutupLoginPanel() { document.getElementById('sec_login_panel').classList.add('hidden'); }

        function loginPanelAdmin() {
            const e = document.getElementById('adm_email').value.trim();
            const p = document.getElementById('adm_pass').value.trim();
            if (e === "kiswanto73@guru.sd.belajar.is" && p === "Kis7384@") {
                sessionStorage.setItem("ownerLoggedIn", "true"); // Kunci owner
                sessionStorage.setItem("ownerEmail", e);
                window.location.href = "dashboard-kantin.html";
            } else { alert("Password Owner Salah!"); }
        }
    </script>
</body>
</html>
